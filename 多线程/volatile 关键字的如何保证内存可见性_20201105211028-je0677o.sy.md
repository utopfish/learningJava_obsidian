- volatile 关键字的作用

  - 保证内存的可见性
  - 防止指令重排
  - 注意：volatile 并不保证原子性
- 内存可见性

  - volatile 保证可见性的原理是在每次访问变量时都会进行一次刷新，因此每次访问都是主内存中最新的版本。所以 volatile 关键字的作用之一就是保证变量修改的实时可见性。
- 当且仅当满足以下所有条件时，才应该使用 volatile 变量

  - 对变量的写入操作不依赖变量的当前值，或者你能确保只有单个线程更新变量的值。
  - 该变量没有包含在具有其他变量的不变式中。
- volatile 使用建议

  - 在两个或者更多的线程需要访问的成员变量上使用 volatile。当要访问的变量已在 synchronized 代码块中，或者为常量时，没必要使用volatile。
  - 由于使用 volatile 屏蔽掉了 JVM 中必要的代码优化，所以在效率上比较低，因此一定在必要时才使用此关键字。
